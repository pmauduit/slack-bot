<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>slackbot</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/simple.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
      <div class="slides">

				<section>
					<h3>"Parle à mon bot"</h3>
					<h4>Organizing my work at Camptocamp with a Slack bot</h4>
					<p></p>
				</section>

				<section>
					<h3>Are you able to name every tools / online services we use on a
						day-to-day basis @ work ?</h3>
				</section>

				<section>
					<h3>A few ones:</h3>
					<ul>
						<li>JIRA</li>
						<li>Confluence</li>
						<li>Github</li>
						<li>docker-hub</li>
						<li>Odoo</li>
						<li>Google Workspace (mail, calendar, drive ...)</li>
						<li>Amazon AWS (or any other cloud provider)</li>
					</ul>
				</section>

				<section>
					<h3>Wait ... I forgot a one ...</h3>
					<p>Hint:</p>
					<img src="images/compiling.png" />
				</section>

				<section>
					<h3>Slack !</h3>
					<p>Some of us formerly were using (or are still using):</p>
					<ul>
						<li>IRC (boring: no emojis, no images)</li>
						<li>Gtalk (not really suited for chat rooms)</li>
						<li>Hipchat (dead now)</li>
					</ul>
				</section>

				<section>
					<h3>Common point between the previously mentioned services ?</h3>
					<h4>They all have an API !</h4>
					<ul>
						<li>Odoo has this JSON-RPC endpoint</li>
						<li>Github: REST & GraphQL</li>
						<li>JIRA (+ plugins) & Confluence have some hidden APIs, RSS endpoints</li>
						<li>And Slack obviously has a one</li>
					</ul>
				</section>

				<section>
					<h3>So what ? ¯\_(ツ)_/¯</h3>
					<p>Why not bridging all these services together ?</p>
				</section>

				<section>
					<code>pmauduit/slack-bot</code>
					<p>My pet project for an imaginary companion at work</p>
					<p>More precisely: A slack bot which warns me about some events from:
					<ul>
						<li>JIRA & Confluence</li>
						<li>Github</li>
						<li>Google</li>
						<li>AWS</li>
					</ul>
				</p>
			</section>

			<section>
				<p>... with which I can also interact, to:
					<ul>
						<li>Fill in my timesheet</li>
						<li>Look for resources on Jira, Confluence, Github</li>
						<li>List opened Pull-Requests on some repositories</li>
						<li>Give me my current working time for the day, week ...</li>
					</ul>
				</p>
			</section>

			<section>
				<code>pmauduit/slack-bot</code>
				<p>More into the technical details:
					<ul>
						<li>a PoC that went really too far</li>
						<li>Coded in Groovy</li>
						<li>uses the Java <code>com.ullink.slack:simpleslackapi</code> library</li>
						<li>Tends to avoid external client libraries (KISS)</li>
						<li>~ 60% code coverage</li>
					</ul>
				</p>
				<p>Now, let's see some screenshots</p>
		</section>
		<section>
			<h3>Events coming from Jira ("search issues" endpoint)</h3>
			<img src="images/jira-new-issue.png" />
		</section>
			<section>
				<h3>Events coming from Jira (RSS feeds)</h3>
				<img src="images/jira-rss.png" />
			</section>
			<section>
				<h3>Events coming from Tempo: timesheet approved</h3>
				<img src="images/tempo-ts-report.png" />
			</section>
			<section>
				<h3>Events coming from Confluence</h3>
				<img src="images/confluence-rss.png" />
			</section>
			<section>
				<h3>Events coming from Github</h3>
				<img src="images/github-events.png" />
			</section>
			<section>
				<h3>Events coming from S3</h3>
				<img src="images/terraform.png" />
			</section>

			<section>
				<h3>Querying JIRA</h3>
				<img src="images/jira-mine.png" />
				<p><i><small>No need to visit JIRA anymore ! Well, almost ...</small></i></p>
			</section>
			<section>
				<h3>Getting my JIRA activity over the last week</h3>
				<img src="images/jira-activity.png" />
				<p><i><small>Next step: fill in directly into Tempo</small></i></p>
			</section>
			<section>
				<h3>Querying Github</h3>
				<img src="images/github-find.png" />
				<img src="images/github-opened-prs.png" />
			</section>

			<section>
				<h3>Checking presence of a colleague with Odoo</h3>
				<p>(attendance_state field on res.users)</p>
				<img src="images/odoo-presence.png" />
				<p><i><small>Note: only works with people from the same company, does not
					work with my account on swiss & german colleagues ?! Since we are no
				longer required to signin/signout on Odoo anyway ...</small></i></p>
			</section>

			<section>
				<h3>Filling my timesheet</h3>
				<p>outside of Tempo !</p>
				<img src="images/tempo.png" />
				<p><i><small>Note: the Tempo UI being not that bad actually, I prefer
				to use the official one ... I still use this feature from time to time though.</small></i></p>
			</section>

			<section>
				<h3>Working time from Odoo, "in realtime"</h3>
				<img src="images/odoo-today.png" />
				<p><i><small>Probably the command I use the most to track my worklog,
					 I can also ask for the summary on the current week.</small></i></p>
			</section>

			<section>
				<h3>Getting a worklog from JIRA</h3>
				<img src="images/jira-worklog.png" />
				<p><i><small>Just to spy on the others' TS ... Or to give a rough idea on where we are on a specific issue.</small></i></p>
			</section>

			<section>
				<h3>Visiting websites (1/2)</h3>
				<img src="images/grafana-monitoring.png" />
				<p><i><small>Because I am too lazy to open a new tab in my browser ?</small></i></p>
			</section>

			<section>
				<h3>Visiting websites (2/2)</h3>
				<img src="images/kibana-weather.png" />
				<p><i><small>This command is triggered every monday morning at 10:15, and the
				result is dumped onto the gs-georchestra slack channel.</small></i></p>
			</section>

			<section>
				<h3>What's next ?</h3>
				<ul>
					<li>A command to pre-fill my timesheet on Tempo, based on the analyzed activity</li>
					<li>A daily summary based on the coming events on GoogleCalendar, every 9:00 AM</li>
					<li>A preliminary analyze of my JIRA issues ?</li>
				</ul>
			</section>


			<section>
				<h3>What I learned so far</h3>
				<ul>
					<li>Finding documentation on JIRA & Confluence is abominable</li>
					<li>Compared to the other ones, JIRA has the less coherent API</li>
					<li>GraphQL-based APIs are puzzling, but the underlying concepts are interesting</li>
					<li>More documentation on how to query the Odoo JSON/RPC endpoint would be appreciated</li>
					<li>Sometimes, you don't need a dedicated lib to interact with an API</li>
				</ul>
			</section>

			<section>
				<h3>Conclusions</h3>
				<small>
				<ul>
					<li>I was first trying to escape from Jira, I learned to use it more efficiently</li>
					<li>We should take the time to deeply discover all these tools, before using them
					(this project changed my way of using JIRA)</li>
					<li>I was not aware of the amount of data we were creating at work (35k issues on JIRA-C2C !)</li>
					<li>People from the other dept. are also doing interesting stuff</li>
					<li>Camptocamp lacks guidelines at some point (what about an "administrator guide" for the github admins ?)</li>
					<li>Next year, my bot will work for me, and I won't tell you about it.</li>
				</ul>
			</small>
			</section>

			<section>
				<h3>Thanks for you attention !</h3>
				<p><i>Questions ?</i></p>
				<img src="images/zazou.jpg" alt="For questions, please ask my cat" />
			</section>

      </div>
    </div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
